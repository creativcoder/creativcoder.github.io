<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>creativcoder</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/ab2a2959b9ba8661.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ab2a2959b9ba8661.css" data-n-g=""/><link rel="preload" href="/_next/static/css/f16eaa9e44b97d3f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f16eaa9e44b97d3f.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-9faa89de3ee6e754.js" defer=""></script><script src="/_next/static/chunks/framework-a87821de553db91d.js" defer=""></script><script src="/_next/static/chunks/main-32a43e1092778ede.js" defer=""></script><script src="/_next/static/chunks/pages/_app-2e588ff4f55f23af.js" defer=""></script><script src="/_next/static/chunks/167-4ae4480dee839e87.js" defer=""></script><script src="/_next/static/chunks/675-f43734e7770ea31e.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-c606869ed04a3d0b.js" defer=""></script><script src="/_next/static/C0oqtusQj9cY-EdwLN_RL/_buildManifest.js" defer=""></script><script src="/_next/static/C0oqtusQj9cY-EdwLN_RL/_ssgManifest.js" defer=""></script></head><body><div id="__next"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="" style="position:fixed;top:0;left:0;height:3px;background:transparent;z-index:99999999999;width:100%"><div class="" style="height:100%;background:#4CE0B3;transition:all 500ms ease;width:0%"><div style="box-shadow:0 0 10px #4CE0B3, 0 0 10px #4CE0B3;width:5%;opacity:1;position:absolute;height:100%;transition:all 500ms ease;transform:rotate(3deg) translate(0px, -4px);left:-10rem"></div></div></div><div class="flex min-h-screen w-screen overflow-hidden flex-col items-center dark:bg-[#242729] bg-slate-200 backdrop" style="opacity:0.5;background-color:#E2E8F0"><div class="max-w-2xl md:max-w-3xl lg:max-w-4xl space-y-12 w-screen sticky"><nav class="bg-[#f6f8f9] dark:bg-[#2b2e30] dark:shadow-md m-3 rounded-lg shadow-sm backdrop-filter backdrop-blur-md bg-opacity-40 sticky top-0 mt-10"><div class="mx-auto p-4"><div class="flex justify-between"><div class="cursor-pointer flex space-x-2 items-center"><div><img src="/logo_v3.svg" width="26" class="pt-0.5 invert"/></div><div class="text-lg dark:text-white hidden md:block">creativcoder</div></div><div class="flex items-center pr-2"><ul class="hidden md:flex md:space-x-4 pr-3"><a class="hover:text-slate-500 dark:text-slate-200 text-slate-700 transition flex items-center" href="/blog"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M18.404 2.998c-.757-.754-2.077-.751-2.828.005l-1.784 1.791L11.586 7H7a.998.998 0 0 0-.939.658l-4 11c-.133.365-.042.774.232 1.049l2 2a.997.997 0 0 0 1.049.232l11-4A.998.998 0 0 0 17 17v-4.586l2.207-2.207v-.001h.001L21 8.409c.378-.378.586-.881.585-1.415 0-.535-.209-1.038-.588-1.415l-2.593-2.581zm-3.111 8.295A.996.996 0 0 0 15 12v4.3l-9.249 3.363 4.671-4.671c.026.001.052.008.078.008A1.5 1.5 0 1 0 9 13.5c0 .026.007.052.008.078l-4.671 4.671L7.7 9H12c.266 0 .52-.105.707-.293L14.5 6.914 17.086 9.5l-1.793 1.793zm3.206-3.208-2.586-2.586 1.079-1.084 2.593 2.581-1.086 1.089z"></path></svg></a><a class="hover:text-slate-500 dark:text-slate-200 text-slate-700 transition flex items-center" href="https://youtube.com/@creativcoder"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><g><path fill="none" d="M0 0h24v24H0z"></path><path fill-rule="nonzero" d="M19.606 6.995c-.076-.298-.292-.523-.539-.592C18.63 6.28 16.5 6 12 6s-6.628.28-7.069.403c-.244.068-.46.293-.537.592C4.285 7.419 4 9.196 4 12s.285 4.58.394 5.006c.076.297.292.522.538.59C5.372 17.72 7.5 18 12 18s6.629-.28 7.069-.403c.244-.068.46-.293.537-.592C19.715 16.581 20 14.8 20 12s-.285-4.58-.394-5.005zm1.937-.497C22 8.28 22 12 22 12s0 3.72-.457 5.502c-.254.985-.997 1.76-1.938 2.022C17.896 20 12 20 12 20s-5.893 0-7.605-.476c-.945-.266-1.687-1.04-1.938-2.022C2 15.72 2 12 2 12s0-3.72.457-5.502c.254-.985.997-1.76 1.938-2.022C6.107 4 12 4 12 4s5.896 0 7.605.476c.945.266 1.687 1.04 1.938 2.022zM10 15.5v-7l6 3.5-6 3.5z"></path></g></svg></a><a class="hover:text-slate-500 dark:text-slate-200 text-slate-700 transition flex items-center" href="/about"><svg stroke="currentColor" fill="none" stroke-width="0" viewBox="0 0 24 24" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z" fill="currentColor"></path></svg></a></ul><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="md:hidden block"><path d="M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z"></path></svg></div></div></div></nav><div><article class="dark:text-slate-200 dark:prose-headings:text-slate-200 dark:prose-code:text-slate-200 dark:prose-blockquote:text-slate-200 dark:prose-strong:text-slate-100 dark:prose-pre:bg-zinc-900 dark:prose-pre:shadow-md dark:prose-pre:border-gray-600 dark:prose-pre:border-[1.4px] dark:prose-a:text-slate-200 prose prose-xl flex flex-col mx-auto max-w-6xl justify-center pl-6 pr-6 prose-p:m-3 prose-headings:mb-3 prose-headings:mt-3 prose-a:font-bold prose-img:rounded-lg prose-img:m-auto prose-img:w-full prose-img:shadow-lg prose-code:font-jetbrains prose-pre:p-0 prose-a:no-underline prose-h1:text-4xl prose-h1:pl-2 prose-h2:pl-2 prose-blockquote:border-slate-600 prose-h2:text-xl"><div class="flex flex-col"><p class="text-4xl font-bold">How to add comment support on your Gatsby blog using Github utterances</p><div class="pt-3 flex justify-between flex-row-reverse"><div class="flex items-center space-x-2"><p class="text-sm">29th July 2020</p></div><div class="flex items-center space-x-2"><p class="text-sm tracking-wide">creativcoder<!-- --> / <!-- -->6min<!-- --></p></div></div><div class="flex justify-center"><hr class="mb-8 h-px bg-gray-400 border-0 dark:bg-gray-500 w-full"/></div></div><p>This post is about integrating comments support in your blog using a free and open source service.</p>
<!-- --><ul>
<!-- --><li>Update (2022): Prefer using <!-- --><a href="https://giscuss.app">Giscuss</a> instead.<!-- --></li>
<!-- --></ul>
<!-- --><p><img src="https://images.unsplash.com/photo-1516414447565-b14be0adf13e" alt="cover image"/></p>
<!-- --><p>Having a way to engage with your audience is probably the next step you can take if your blog is helping others in some way. Back when I had used <!-- --><a href="https://gohugo.io/">hugo</a> as my static site generator, I had used <!-- --><a href="https://disqus.com/">Disqus</a>, which is a comments service/system. But as with ordinary third party services, Disqus is notorious for putting their own ads and can get quite slow. As a fan of open source and code reuse, I knew there had to be some open source comments service out there. After a day of sifting through the interwebs, I found a solution that I think for the time being serves my purpose of engaging with my audience.<!-- --></p>
<!-- --><p>What follows is a quick guide on how to integrate Github&#x27;s <!-- --><a href="https://github.com/utterance">utterances</a> comments system into your blog. This also became an excuse for me stay updated with all the recent changes in the web dev space, as I&#x27;ve been mostly doing backend for the last two years.<!-- --></p>
<!-- --><p>Utternaces is a lightweight comments widget built on top of Github issues. Some of its highlights are:</p>
<!-- --><ul>
<!-- --><li>
<!-- --><p>Open source. üôå</p>
<!-- --></li>
<!-- --><li>
<!-- --><p>No tracking, no ads, always free. üì°üö´</p>
<!-- --></li>
<!-- --><li>
<!-- --><p>No lock-in. All data stored in GitHub issues. üîì</p>
<!-- --></li>
<!-- --><li>
<!-- --><p>Styled with Primer, the css toolkit that powers GitHub. üíÖ</p>
<!-- --></li>
<!-- --><li>
<!-- --><p>Dark theme. üåò</p>
<!-- --></li>
<!-- --><li>
<!-- --><p>Lightweight. Vanilla TypeScript. No font downloads, JavaScript frameworks or polyfills for evergreen browsers. üê¶üå≤</p>
<!-- --></li>
<!-- --></ul>
<!-- --><p><strong>Target audience</strong>: You know ReactJS, and you probably know better than me and maybe can provide suggestions on how I can improve the integration.<!-- --></p>
<!-- --><p><strong>Disclaimer</strong>: This comments system only works if your target audience has a GitHub account, which in majority of cases are developers. As my blog is mostly oriented towards developers, this aligns perfectly with my blog.<!-- --></p>
<!-- --><p>The official guide of <!-- --><a href="https://utteranc.es/">utterances</a> mentions integrating the comments widget on a vanilla HTML website. That won&#x27;t work for my case as I happen to be running a site that is generated by <!-- --><a href="https://www.gatsbyjs.org/">GatsbyJS</a>, which I think is a really efficient static site generator not only in terms of development experience but also in terms of performance of the generated sites compared to my past experiences with static site generators such as Hugo.<!-- --></p>
<!-- --><p>Gatsby uses React under the hood which meant that I needed to integrate utterances as a <!-- --><a href="https://reactjs.org/docs/components-and-props.html">React component</a>.<!-- --></p>
<!-- --><p><em>Note</em>: I am by no means an expert on react or even a frontend expert, but the following steps
is me just sifting through bunch of documentation pages and tying to cobble together a working solution.<!-- --></p>
<!-- --><p>So here&#x27;s how I did it.</p>
<!-- --><h1 id="installing-utterances"><a href="#installing-utterances">Installing utterances</a></h1>
<!-- --><p>First, I setup a Github repository (has to be a public repository) that will act
as a placeholder for issues to be created within: https://github.com/creativcoder/creativcoder.dev-comments
This is needed if you have a website that is not running as a Github pages site. If you happen to have your website as a Github repository, you can configure the same repository for utterances.</p>
<!-- --><p>Next, we go to: https://github.com/apps/utterances page. You will see an &#x27;Install&#x27; button in green on the right. Clicking that, you will need to provide the repository where you want to install the widget. I chose my comments repository above.</p>
<!-- --><p>Post installation, you will be redirected to this <!-- --><a href="https://utteranc.es/">page</a>. In the &#x27;Enabling Utterances&#x27; section, we need to place the following script in a div tag (or any container tag) where we want our comment widget to appear:<!-- --></p>
<!-- --><pre><code class="hljs language-html"><span class="hljs-tag">&lt;<!-- --><span class="hljs-name">script</span> <!-- --><span class="hljs-attr">src</span>=<!-- --><span class="hljs-string">&quot;https://utteranc.es/client.js&quot;</span>
        <!-- --><span class="hljs-attr">repo</span>=<!-- --><span class="hljs-string">&quot;[ENTER REPO HERE]&quot;</span>
        <!-- --><span class="hljs-attr">issue-term</span>=<!-- --><span class="hljs-string">&quot;pathname&quot;</span>
        <!-- --><span class="hljs-attr">theme</span>=<!-- --><span class="hljs-string">&quot;github-light&quot;</span>
        <!-- --><span class="hljs-attr">crossorigin</span>=<!-- --><span class="hljs-string">&quot;anonymous&quot;</span>
        <!-- --><span class="hljs-attr">async</span>&gt;<!-- --></span>
<!-- --><span class="hljs-tag">&lt;/<!-- --><span class="hljs-name">script</span>&gt;<!-- --></span>
<!-- --></code></pre>
<!-- --><p>As you can see, the script tag above has multiple attributes that can be configured. The important ones to look at are:</p>
<!-- --><ul>
<!-- --><li><code>repo</code>: should point to the repository you installed utterances above section.<!-- --></li>
<!-- --><li><code>issue-term</code>: how utterances should match the issues with posts on a website. In my case, am using the title of the posts. You can refer to &#x27;Blog Post to Issue Mapping&#x27; section in https://utteranc.es/ for more details and choose as per your preference.<!-- --></li>
<!-- --></ul>
<!-- --><h1 id="integrating-the-comment-widget"><a href="#integrating-the-comment-widget">Integrating the comment widget</a></h1>
<!-- --><p>Now as I said above, the script needs to be put in a container tag for us to render the comments widget. That translates to having a component in react, within which we&#x27;ll append this script tag programmatically whenever a blog post page is rendered. This will need to happen conditionally as not all pages are about a blog post page, such as the index page and the about page.</p>
<!-- --><p>To have a container for the widget to be created within, I first created a <!-- --><code>Comment</code> react component (<!-- --><a href="https://www.robinwieruch.de/react-function-component">a functional component</a>) in <!-- --><code>components/comment.js</code>:<!-- --></p>
<!-- --><pre><code class="hljs language-jsx"><span class="hljs-comment">// commment.js</span>

<!-- --><span class="hljs-keyword">import</span> {useRef, useEffect} <!-- --><span class="hljs-keyword">from</span> <!-- --><span class="hljs-string">&#x27;react&#x27;</span>
<!-- --><span class="hljs-keyword">import</span> <!-- --><span class="hljs-title class_">React</span> <!-- --><span class="hljs-keyword">from</span> <!-- --><span class="hljs-string">&#x27;react&#x27;</span>;
<!-- --><span class="hljs-keyword">import</span> { useStaticQuery, graphql } <!-- --><span class="hljs-keyword">from</span> <!-- --><span class="hljs-string">&#x27;gatsby&#x27;</span>

<!-- --><span class="hljs-keyword">const</span> <!-- --><span class="hljs-title function_">Comment</span> = (<!-- --><span class="hljs-params">{commentBox}</span>) =&gt; (<!-- --><span class="xml"><span class="hljs-tag">&lt;<!-- --><span class="hljs-name">div</span> <!-- --><span class="hljs-attr">ref</span>=<!-- --><span class="hljs-string">{commentBox}</span> <!-- --><span class="hljs-attr">className</span>=<!-- --><span class="hljs-string">&quot;comments&quot;</span>&gt;<!-- --></span><span class="hljs-tag">&lt;/<!-- --><span class="hljs-name">div</span>&gt;<!-- --></span></span>)
<!-- --><span class="hljs-keyword">export</span> <!-- --><span class="hljs-keyword">default</span> <!-- --><span class="hljs-title class_">Comment</span>

<!-- --></code></pre>
<!-- --><p>It&#x27;s a very trivial component. The only thing of intereset here is the <!-- --><code>commentBox</code> react ref. <!-- --><a href="https://reactjs.org/docs/refs-and-the-dom.html#callback-refs">React Refs</a> provide a way to access DOM nodes or React elements created within a component&#x27;s render method. We&#x27;ll see how that is used later. It&#x27;s not really recommended to use refs, as they are sort of an escape hatch but since we only have one use case for it here, we should be fine.<!-- --></p>
<!-- --><p>Next, I have a <!-- --><code>&lt;Posts&gt;</code> component in my blog which renders each blog post. This is where I want the comment widget to appear at the end of each post. I needed a way to render the <!-- --><code>Comments</code> component conditionally. To achieve that, I relied on the <!-- --><code>excerpt</code> prop which is <!-- --><code>true</code> if the rendered page is an index page, where only an excerpt of all blog posts are shown. In other cases it&#x27;s set to <!-- --><code>false</code>. We can use that to conditionally render the <!-- --><code>Comments</code> component like so:<!-- --></p>
<!-- --><pre><code class="hljs language-jsx"><span class="hljs-comment">// components/posts.js</span>
{ excerpt? <!-- --><span class="xml"><span class="hljs-tag">&lt;&gt;</span><span class="hljs-tag">&lt;/&gt;</span></span>: <!-- --><span class="xml"><span class="hljs-tag">&lt;<!-- --><span class="hljs-name">Comment</span> <!-- --><span class="hljs-attr">commentBox</span>=<!-- --><span class="hljs-string">{commentBox}</span> /&gt;<!-- --></span></span>}
<!-- --></code></pre>
<!-- --><p>It&#x27;s the usual ternary operator. The <!-- --><code>&lt;&gt;&lt;/&gt;</code> syntax are <!-- --><a href="https://reactjs.org/docs/fragments.html">fragments</a> in react, which is empty in the true branch as we only want to render the widget when the user in on the blog post page. We also see that the comment widget has a <!-- --><code>commentBox</code> prop being passed. This is how we gain access to the <!-- --><code>Comment</code> component for use within the <!-- --><code>Posts</code> component. We&#x27;ll use this ref to append the comment script tag.<!-- --></p>
<!-- --><p>Back in my <!-- --><code>Posts</code> component, I create a ref that was attached to the <!-- --><code>commentBox</code> prop on <!-- --><code>Comment</code> component:<!-- --></p>
<!-- --><pre><code class="hljs language-jsx"><span class="hljs-comment">// components/post.js</span>
<!-- --><span class="hljs-keyword">const</span> commentBox = <!-- --><span class="hljs-title class_">React</span>.<!-- --><span class="hljs-title function_">createRef</span>()
<!-- --></code></pre>
<!-- --><p>Then, I use the <!-- --><code>useEffect</code> hook to add the script tag to the <!-- --><code>Comment</code> component via the ref:<!-- --></p>
<!-- --><pre><code class="hljs language-jsx">  <!-- --><span class="hljs-keyword">const</span> commentBox = <!-- --><span class="hljs-title class_">React</span>.<!-- --><span class="hljs-title function_">createRef</span>()

  <!-- --><span class="hljs-title function_">useEffect</span>(<!-- --><span class="hljs-function">() =&gt;</span> {
    <!-- --><span class="hljs-keyword">const</span> scriptEl = <!-- --><span class="hljs-variable language_">document</span>.<!-- --><span class="hljs-title function_">createElement</span>(<!-- --><span class="hljs-string">&#x27;script&#x27;</span>)
    scriptEl.<!-- --><span class="hljs-property">async</span> = <!-- --><span class="hljs-literal">true</span>
    scriptEl.<!-- --><span class="hljs-property">src</span> = <!-- --><span class="hljs-string">&#x27;https://utteranc.es/client.js&#x27;</span>
    scriptEl.<!-- --><span class="hljs-title function_">setAttribute</span>(<!-- --><span class="hljs-string">&#x27;repo&#x27;</span>, <!-- --><span class="hljs-string">&#x27;creativcoder/creativcoder.dev-comments&#x27;</span>)
    scriptEl.<!-- --><span class="hljs-title function_">setAttribute</span>(<!-- --><span class="hljs-string">&#x27;issue-term&#x27;</span>, <!-- --><span class="hljs-string">&#x27;title&#x27;</span>)
    scriptEl.<!-- --><span class="hljs-title function_">setAttribute</span>(<!-- --><span class="hljs-string">&#x27;id&#x27;</span>, <!-- --><span class="hljs-string">&#x27;utterances&#x27;</span>)
    scriptEl.<!-- --><span class="hljs-title function_">setAttribute</span>(<!-- --><span class="hljs-string">&#x27;theme&#x27;</span>, <!-- --><span class="hljs-string">&#x27;github-light&#x27;</span>)
    scriptEl.<!-- --><span class="hljs-title function_">setAttribute</span>(<!-- --><span class="hljs-string">&#x27;crossorigin&#x27;</span>, <!-- --><span class="hljs-string">&#x27;anonymous&#x27;</span>)
    <!-- --><span class="hljs-keyword">if</span> (commentBox &amp;&amp; commentBox.<!-- --><span class="hljs-property">current</span>) {
      commentBox.<!-- --><span class="hljs-property">current</span>.<!-- --><span class="hljs-title function_">appendChild</span>(scriptEl)
    } <!-- --><span class="hljs-keyword">else</span> {
      <!-- --><span class="hljs-variable language_">console</span>.<!-- --><span class="hljs-title function_">log</span>(<!-- --><span class="hljs-string">`Error adding utterances comments on: <!-- --><span class="hljs-subst">${commentBox}</span>`<!-- --></span>)
    }
  }, [])
<!-- --></code></pre>
<!-- --><p>The code in <!-- --><code>useEffect</code> will run everytime a <!-- --><code>Post</code> component is rendered which will then append the comment widget to each blog post page. You can see that set the same script attributes are being added but with javascript. We then finally append it to the <!-- --><code>commentBox</code> ref via its <!-- --><code>current</code> property which is active when it is rendered.<!-- --></p>
<!-- --><p>With that done, I did just did a <!-- --><code>yarn deploy</code> and what you see below is our shiny new comment widget üëá.
Hope you find this post helpful. Let me know if you have any issues setting it up in the comments below.<!-- --></p>
<!-- --><p>Until next time!</p><div class="flex justify-center"><hr class="mb-8 h-px bg-gray-400 border-0 dark:bg-gray-500 w-full"/></div><p class="text-sm font-bold">Want to share feedback, or discuss further ideas? Feel free to leave a comment here! Please follow Rust&#x27;s code of conduct. This comment thread directly maps to a discussion on GitHub, so you can also comment there if you prefer.</p></article>;<!-- --></div><footer class="flex flex-col items-center w-full"><div class="px-4 py-2 flex items-center justify-center space-x-2 border-2 rounded-md border-gray-500 hover:bg-blue-100 transition-colors hover:text-lime-900"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M17.625 1.499c-2.32 0-4.354 1.203-5.625 3.03-1.271-1.827-3.305-3.03-5.625-3.03C3.129 1.499 0 4.253 0 8.249c0 4.275 3.068 7.847 5.828 10.227a33.14 33.14 0 0 0 5.616 3.876l.028.017.008.003-.001.003c.163.085.342.126.521.125.179.001.358-.041.521-.125l-.001-.003.008-.003.028-.017a33.14 33.14 0 0 0 5.616-3.876C20.932 16.096 24 12.524 24 8.249c0-3.996-3.129-6.75-6.375-6.75zm-.919 15.275a30.766 30.766 0 0 1-4.703 3.316l-.004-.002-.004.002a30.955 30.955 0 0 1-4.703-3.316c-2.677-2.307-5.047-5.298-5.047-8.523 0-2.754 2.121-4.5 4.125-4.5 2.06 0 3.914 1.479 4.544 3.684.143.495.596.797 1.086.796.49.001.943-.302 1.085-.796.63-2.205 2.484-3.684 4.544-3.684 2.004 0 4.125 1.746 4.125 4.5 0 3.225-2.37 6.216-5.048 8.523z"></path></svg><p>Be a GitHub Sponser</p></div><div class="flex-col items-center justify-center mt-8 mb-8"><div class="text-center text-xs mx-auto">¬© 2016-<!-- -->2022<!-- --> creativcoder. All rights reserved.<!-- --></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"source":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    ul: \"ul\",\n    li: \"li\",\n    a: \"a\",\n    img: \"img\",\n    strong: \"strong\",\n    em: \"em\",\n    h1: \"h1\",\n    pre: \"pre\",\n    code: \"code\",\n    span: \"span\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.p, {\n      children: \"This post is about integrating comments support in your blog using a free and open source service.\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Update (2022): Prefer using \", _jsx(_components.a, {\n          href: \"https://giscuss.app\",\n          children: \"Giscuss\"\n        }), \" instead.\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://images.unsplash.com/photo-1516414447565-b14be0adf13e\",\n        alt: \"cover image\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Having a way to engage with your audience is probably the next step you can take if your blog is helping others in some way. Back when I had used \", _jsx(_components.a, {\n        href: \"https://gohugo.io/\",\n        children: \"hugo\"\n      }), \" as my static site generator, I had used \", _jsx(_components.a, {\n        href: \"https://disqus.com/\",\n        children: \"Disqus\"\n      }), \", which is a comments service/system. But as with ordinary third party services, Disqus is notorious for putting their own ads and can get quite slow. As a fan of open source and code reuse, I knew there had to be some open source comments service out there. After a day of sifting through the interwebs, I found a solution that I think for the time being serves my purpose of engaging with my audience.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"What follows is a quick guide on how to integrate Github's \", _jsx(_components.a, {\n        href: \"https://github.com/utterance\",\n        children: \"utterances\"\n      }), \" comments system into your blog. This also became an excuse for me stay updated with all the recent changes in the web dev space, as I've been mostly doing backend for the last two years.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Utternaces is a lightweight comments widget built on top of Github issues. Some of its highlights are:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsx(_components.p, {\n          children: \"Open source. üôå\"\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsx(_components.p, {\n          children: \"No tracking, no ads, always free. üì°üö´\"\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsx(_components.p, {\n          children: \"No lock-in. All data stored in GitHub issues. üîì\"\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsx(_components.p, {\n          children: \"Styled with Primer, the css toolkit that powers GitHub. üíÖ\"\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsx(_components.p, {\n          children: \"Dark theme. üåò\"\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsx(_components.p, {\n          children: \"Lightweight. Vanilla TypeScript. No font downloads, JavaScript frameworks or polyfills for evergreen browsers. üê¶üå≤\"\n        }), \"\\n\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Target audience\"\n      }), \": You know ReactJS, and you probably know better than me and maybe can provide suggestions on how I can improve the integration.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Disclaimer\"\n      }), \": This comments system only works if your target audience has a GitHub account, which in majority of cases are developers. As my blog is mostly oriented towards developers, this aligns perfectly with my blog.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The official guide of \", _jsx(_components.a, {\n        href: \"https://utteranc.es/\",\n        children: \"utterances\"\n      }), \" mentions integrating the comments widget on a vanilla HTML website. That won't work for my case as I happen to be running a site that is generated by \", _jsx(_components.a, {\n        href: \"https://www.gatsbyjs.org/\",\n        children: \"GatsbyJS\"\n      }), \", which I think is a really efficient static site generator not only in terms of development experience but also in terms of performance of the generated sites compared to my past experiences with static site generators such as Hugo.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Gatsby uses React under the hood which meant that I needed to integrate utterances as a \", _jsx(_components.a, {\n        href: \"https://reactjs.org/docs/components-and-props.html\",\n        children: \"React component\"\n      }), \".\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.em, {\n        children: \"Note\"\n      }), \": I am by no means an expert on react or even a frontend expert, but the following steps\\nis me just sifting through bunch of documentation pages and tying to cobble together a working solution.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"So here's how I did it.\"\n    }), \"\\n\", _jsx(_components.h1, {\n      id: \"installing-utterances\",\n      children: _jsx(_components.a, {\n        href: \"#installing-utterances\",\n        children: \"Installing utterances\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"First, I setup a Github repository (has to be a public repository) that will act\\nas a placeholder for issues to be created within: https://github.com/creativcoder/creativcoder.dev-comments\\nThis is needed if you have a website that is not running as a Github pages site. If you happen to have your website as a Github repository, you can configure the same repository for utterances.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Next, we go to: https://github.com/apps/utterances page. You will see an 'Install' button in green on the right. Clicking that, you will need to provide the repository where you want to install the widget. I chose my comments repository above.\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Post installation, you will be redirected to this \", _jsx(_components.a, {\n        href: \"https://utteranc.es/\",\n        children: \"page\"\n      }), \". In the 'Enabling Utterances' section, we need to place the following script in a div tag (or any container tag) where we want our comment widget to appear:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-html\",\n        children: [_jsxs(_components.span, {\n          className: \"hljs-tag\",\n          children: [\"\u003c\", _jsx(_components.span, {\n            className: \"hljs-name\",\n            children: \"script\"\n          }), \" \", _jsx(_components.span, {\n            className: \"hljs-attr\",\n            children: \"src\"\n          }), \"=\", _jsx(_components.span, {\n            className: \"hljs-string\",\n            children: \"\\\"https://utteranc.es/client.js\\\"\"\n          }), \"\\n        \", _jsx(_components.span, {\n            className: \"hljs-attr\",\n            children: \"repo\"\n          }), \"=\", _jsx(_components.span, {\n            className: \"hljs-string\",\n            children: \"\\\"[ENTER REPO HERE]\\\"\"\n          }), \"\\n        \", _jsx(_components.span, {\n            className: \"hljs-attr\",\n            children: \"issue-term\"\n          }), \"=\", _jsx(_components.span, {\n            className: \"hljs-string\",\n            children: \"\\\"pathname\\\"\"\n          }), \"\\n        \", _jsx(_components.span, {\n            className: \"hljs-attr\",\n            children: \"theme\"\n          }), \"=\", _jsx(_components.span, {\n            className: \"hljs-string\",\n            children: \"\\\"github-light\\\"\"\n          }), \"\\n        \", _jsx(_components.span, {\n            className: \"hljs-attr\",\n            children: \"crossorigin\"\n          }), \"=\", _jsx(_components.span, {\n            className: \"hljs-string\",\n            children: \"\\\"anonymous\\\"\"\n          }), \"\\n        \", _jsx(_components.span, {\n            className: \"hljs-attr\",\n            children: \"async\"\n          }), \"\u003e\"]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"hljs-tag\",\n          children: [\"\u003c/\", _jsx(_components.span, {\n            className: \"hljs-name\",\n            children: \"script\"\n          }), \"\u003e\"]\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"As you can see, the script tag above has multiple attributes that can be configured. The important ones to look at are:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"repo\"\n        }), \": should point to the repository you installed utterances above section.\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"issue-term\"\n        }), \": how utterances should match the issues with posts on a website. In my case, am using the title of the posts. You can refer to 'Blog Post to Issue Mapping' section in https://utteranc.es/ for more details and choose as per your preference.\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h1, {\n      id: \"integrating-the-comment-widget\",\n      children: _jsx(_components.a, {\n        href: \"#integrating-the-comment-widget\",\n        children: \"Integrating the comment widget\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Now as I said above, the script needs to be put in a container tag for us to render the comments widget. That translates to having a component in react, within which we'll append this script tag programmatically whenever a blog post page is rendered. This will need to happen conditionally as not all pages are about a blog post page, such as the index page and the about page.\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"To have a container for the widget to be created within, I first created a \", _jsx(_components.code, {\n        children: \"Comment\"\n      }), \" react component (\", _jsx(_components.a, {\n        href: \"https://www.robinwieruch.de/react-function-component\",\n        children: \"a functional component\"\n      }), \") in \", _jsx(_components.code, {\n        children: \"components/comment.js\"\n      }), \":\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-jsx\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// commment.js\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" {useRef, useEffect} \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'react'\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"React\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'react'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { useStaticQuery, graphql } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'gatsby'\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"Comment\"\n        }), \" = (\", _jsx(_components.span, {\n          className: \"hljs-params\",\n          children: \"{commentBox}\"\n        }), \") =\u003e (\", _jsxs(_components.span, {\n          className: \"xml\",\n          children: [_jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"\u003c\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"div\"\n            }), \" \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"ref\"\n            }), \"=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"{commentBox}\"\n            }), \" \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"className\"\n            }), \"=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"\\\"comments\\\"\"\n            }), \"\u003e\"]\n          }), _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"\u003c/\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"div\"\n            }), \"\u003e\"]\n          })]\n        }), \")\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"default\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Comment\"\n        }), \"\\n\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"It's a very trivial component. The only thing of intereset here is the \", _jsx(_components.code, {\n        children: \"commentBox\"\n      }), \" react ref. \", _jsx(_components.a, {\n        href: \"https://reactjs.org/docs/refs-and-the-dom.html#callback-refs\",\n        children: \"React Refs\"\n      }), \" provide a way to access DOM nodes or React elements created within a component's render method. We'll see how that is used later. It's not really recommended to use refs, as they are sort of an escape hatch but since we only have one use case for it here, we should be fine.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Next, I have a \", _jsx(_components.code, {\n        children: \"\u003cPosts\u003e\"\n      }), \" component in my blog which renders each blog post. This is where I want the comment widget to appear at the end of each post. I needed a way to render the \", _jsx(_components.code, {\n        children: \"Comments\"\n      }), \" component conditionally. To achieve that, I relied on the \", _jsx(_components.code, {\n        children: \"excerpt\"\n      }), \" prop which is \", _jsx(_components.code, {\n        children: \"true\"\n      }), \" if the rendered page is an index page, where only an excerpt of all blog posts are shown. In other cases it's set to \", _jsx(_components.code, {\n        children: \"false\"\n      }), \". We can use that to conditionally render the \", _jsx(_components.code, {\n        children: \"Comments\"\n      }), \" component like so:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-jsx\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// components/posts.js\"\n        }), \"\\n{ excerpt? \", _jsxs(_components.span, {\n          className: \"xml\",\n          children: [_jsx(_components.span, {\n            className: \"hljs-tag\",\n            children: \"\u003c\u003e\"\n          }), _jsx(_components.span, {\n            className: \"hljs-tag\",\n            children: \"\u003c/\u003e\"\n          })]\n        }), \": \", _jsx(_components.span, {\n          className: \"xml\",\n          children: _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"\u003c\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"Comment\"\n            }), \" \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"commentBox\"\n            }), \"=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"{commentBox}\"\n            }), \" /\u003e\"]\n          })\n        }), \"}\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"It's the usual ternary operator. The \", _jsx(_components.code, {\n        children: \"\u003c\u003e\u003c/\u003e\"\n      }), \" syntax are \", _jsx(_components.a, {\n        href: \"https://reactjs.org/docs/fragments.html\",\n        children: \"fragments\"\n      }), \" in react, which is empty in the true branch as we only want to render the widget when the user in on the blog post page. We also see that the comment widget has a \", _jsx(_components.code, {\n        children: \"commentBox\"\n      }), \" prop being passed. This is how we gain access to the \", _jsx(_components.code, {\n        children: \"Comment\"\n      }), \" component for use within the \", _jsx(_components.code, {\n        children: \"Posts\"\n      }), \" component. We'll use this ref to append the comment script tag.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Back in my \", _jsx(_components.code, {\n        children: \"Posts\"\n      }), \" component, I create a ref that was attached to the \", _jsx(_components.code, {\n        children: \"commentBox\"\n      }), \" prop on \", _jsx(_components.code, {\n        children: \"Comment\"\n      }), \" component:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-jsx\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// components/post.js\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" commentBox = \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"React\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"createRef\"\n        }), \"()\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Then, I use the \", _jsx(_components.code, {\n        children: \"useEffect\"\n      }), \" hook to add the script tag to the \", _jsx(_components.code, {\n        children: \"Comment\"\n      }), \" component via the ref:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-jsx\",\n        children: [\"  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" commentBox = \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"React\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"createRef\"\n        }), \"()\\n\\n  \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"useEffect\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-function\",\n          children: \"() =\u003e\"\n        }), \" {\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" scriptEl = \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"document\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"createElement\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'script'\"\n        }), \")\\n    scriptEl.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"async\"\n        }), \" = \", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"true\"\n        }), \"\\n    scriptEl.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"src\"\n        }), \" = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'https://utteranc.es/client.js'\"\n        }), \"\\n    scriptEl.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"setAttribute\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'repo'\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'creativcoder/creativcoder.dev-comments'\"\n        }), \")\\n    scriptEl.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"setAttribute\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'issue-term'\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'title'\"\n        }), \")\\n    scriptEl.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"setAttribute\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'id'\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'utterances'\"\n        }), \")\\n    scriptEl.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"setAttribute\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'theme'\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'github-light'\"\n        }), \")\\n    scriptEl.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"setAttribute\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'crossorigin'\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'anonymous'\"\n        }), \")\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (commentBox \u0026\u0026 commentBox.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"current\"\n        }), \") {\\n      commentBox.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"current\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"appendChild\"\n        }), \"(scriptEl)\\n    } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"else\"\n        }), \" {\\n      \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"console\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"log\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-string\",\n          children: [\"`Error adding utterances comments on: \", _jsx(_components.span, {\n            className: \"hljs-subst\",\n            children: \"${commentBox}\"\n          }), \"`\"]\n        }), \")\\n    }\\n  }, [])\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The code in \", _jsx(_components.code, {\n        children: \"useEffect\"\n      }), \" will run everytime a \", _jsx(_components.code, {\n        children: \"Post\"\n      }), \" component is rendered which will then append the comment widget to each blog post page. You can see that set the same script attributes are being added but with javascript. We then finally append it to the \", _jsx(_components.code, {\n        children: \"commentBox\"\n      }), \" ref via its \", _jsx(_components.code, {\n        children: \"current\"\n      }), \" property which is active when it is rendered.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"With that done, I did just did a \", _jsx(_components.code, {\n        children: \"yarn deploy\"\n      }), \" and what you see below is our shiny new comment widget üëá.\\nHope you find this post helpful. Let me know if you have any issues setting it up in the comments below.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Until next time!\"\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}},"meta":{"excerpt":"Utterances is a free and opensource comments service powered by Github","slug":"add-github-utterances-to-blog","title":"How to add comment support on your Gatsby blog using Github utterances","tags":["blog","comments","opensource","utterances"],"date":"Wed Jul 29 2020 05:30:00 GMT+0530 (India Standard Time)","author":"creativcoder","readingTime":"6min"}}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"add-github-utterances-to-blog"},"buildId":"C0oqtusQj9cY-EdwLN_RL","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>