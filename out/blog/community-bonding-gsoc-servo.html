<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>creativcoder</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/ab2a2959b9ba8661.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ab2a2959b9ba8661.css" data-n-g=""/><link rel="preload" href="/_next/static/css/f16eaa9e44b97d3f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f16eaa9e44b97d3f.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-9faa89de3ee6e754.js" defer=""></script><script src="/_next/static/chunks/framework-a87821de553db91d.js" defer=""></script><script src="/_next/static/chunks/main-32a43e1092778ede.js" defer=""></script><script src="/_next/static/chunks/pages/_app-2e588ff4f55f23af.js" defer=""></script><script src="/_next/static/chunks/167-4ae4480dee839e87.js" defer=""></script><script src="/_next/static/chunks/675-f43734e7770ea31e.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-c606869ed04a3d0b.js" defer=""></script><script src="/_next/static/C0oqtusQj9cY-EdwLN_RL/_buildManifest.js" defer=""></script><script src="/_next/static/C0oqtusQj9cY-EdwLN_RL/_ssgManifest.js" defer=""></script></head><body><div id="__next"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="" style="position:fixed;top:0;left:0;height:3px;background:transparent;z-index:99999999999;width:100%"><div class="" style="height:100%;background:#4CE0B3;transition:all 500ms ease;width:0%"><div style="box-shadow:0 0 10px #4CE0B3, 0 0 10px #4CE0B3;width:5%;opacity:1;position:absolute;height:100%;transition:all 500ms ease;transform:rotate(3deg) translate(0px, -4px);left:-10rem"></div></div></div><div class="flex min-h-screen w-screen overflow-hidden flex-col items-center dark:bg-[#242729] bg-slate-200 backdrop" style="opacity:0.5;background-color:#E2E8F0"><div class="max-w-2xl md:max-w-3xl lg:max-w-4xl space-y-12 w-screen sticky"><nav class="bg-[#f6f8f9] dark:bg-[#2b2e30] dark:shadow-md m-3 rounded-lg shadow-sm backdrop-filter backdrop-blur-md bg-opacity-40 sticky top-0 mt-10"><div class="mx-auto p-4"><div class="flex justify-between"><div class="cursor-pointer flex space-x-2 items-center"><div><img src="/logo_v3.svg" width="26" class="pt-0.5 invert"/></div><div class="text-lg dark:text-white hidden md:block">creativcoder</div></div><div class="flex items-center pr-2"><ul class="hidden md:flex md:space-x-4 pr-3"><a class="hover:text-slate-500 dark:text-slate-200 text-slate-700 transition flex items-center" href="/blog"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M18.404 2.998c-.757-.754-2.077-.751-2.828.005l-1.784 1.791L11.586 7H7a.998.998 0 0 0-.939.658l-4 11c-.133.365-.042.774.232 1.049l2 2a.997.997 0 0 0 1.049.232l11-4A.998.998 0 0 0 17 17v-4.586l2.207-2.207v-.001h.001L21 8.409c.378-.378.586-.881.585-1.415 0-.535-.209-1.038-.588-1.415l-2.593-2.581zm-3.111 8.295A.996.996 0 0 0 15 12v4.3l-9.249 3.363 4.671-4.671c.026.001.052.008.078.008A1.5 1.5 0 1 0 9 13.5c0 .026.007.052.008.078l-4.671 4.671L7.7 9H12c.266 0 .52-.105.707-.293L14.5 6.914 17.086 9.5l-1.793 1.793zm3.206-3.208-2.586-2.586 1.079-1.084 2.593 2.581-1.086 1.089z"></path></svg></a><a class="hover:text-slate-500 dark:text-slate-200 text-slate-700 transition flex items-center" href="https://youtube.com/@creativcoder"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><g><path fill="none" d="M0 0h24v24H0z"></path><path fill-rule="nonzero" d="M19.606 6.995c-.076-.298-.292-.523-.539-.592C18.63 6.28 16.5 6 12 6s-6.628.28-7.069.403c-.244.068-.46.293-.537.592C4.285 7.419 4 9.196 4 12s.285 4.58.394 5.006c.076.297.292.522.538.59C5.372 17.72 7.5 18 12 18s6.629-.28 7.069-.403c.244-.068.46-.293.537-.592C19.715 16.581 20 14.8 20 12s-.285-4.58-.394-5.005zm1.937-.497C22 8.28 22 12 22 12s0 3.72-.457 5.502c-.254.985-.997 1.76-1.938 2.022C17.896 20 12 20 12 20s-5.893 0-7.605-.476c-.945-.266-1.687-1.04-1.938-2.022C2 15.72 2 12 2 12s0-3.72.457-5.502c.254-.985.997-1.76 1.938-2.022C6.107 4 12 4 12 4s5.896 0 7.605.476c.945.266 1.687 1.04 1.938 2.022zM10 15.5v-7l6 3.5-6 3.5z"></path></g></svg></a><a class="hover:text-slate-500 dark:text-slate-200 text-slate-700 transition flex items-center" href="/about"><svg stroke="currentColor" fill="none" stroke-width="0" viewBox="0 0 24 24" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z" fill="currentColor"></path></svg></a></ul><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="md:hidden block"><path d="M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z"></path></svg></div></div></div></nav><div><article class="dark:text-slate-200 dark:prose-headings:text-slate-200 dark:prose-code:text-slate-200 dark:prose-blockquote:text-slate-200 dark:prose-strong:text-slate-100 dark:prose-pre:bg-zinc-900 dark:prose-pre:shadow-md dark:prose-pre:border-gray-600 dark:prose-pre:border-[1.4px] dark:prose-a:text-slate-200 prose prose-xl flex flex-col mx-auto max-w-6xl justify-center pl-6 pr-6 prose-p:m-3 prose-headings:mb-3 prose-headings:mt-3 prose-a:font-bold prose-img:rounded-lg prose-img:m-auto prose-img:w-full prose-img:shadow-lg prose-code:font-jetbrains prose-pre:p-0 prose-a:no-underline prose-h1:text-4xl prose-h1:pl-2 prose-h2:pl-2 prose-blockquote:border-slate-600 prose-h2:text-xl"><div class="flex flex-col"><p class="text-4xl font-bold">Post community bonding period with Servo- GSoC&#x27;16</p><div class="pt-3 flex justify-between flex-row-reverse"><div class="flex items-center space-x-2"><p class="text-sm">9th June 2016</p></div><div class="flex items-center space-x-2"><p class="text-sm tracking-wide">creativcoder<!-- --> / <!-- -->5min<!-- --></p></div></div><div class="flex justify-center"><hr class="mb-8 h-px bg-gray-400 border-0 dark:bg-gray-500 w-full"/></div></div><p><img src="https://hackernoon.com/hn-images/0*GXeaiRPePMjHuuHZ" alt="alt init_phase"/></p>
<!-- --><p>My <!-- --><a href="service-workers-web/">previous post</a> gave a brief introduction about service workers. This post will be a brief intro to Servo&#x27;s architectural design in order to provide a context for my next post that discusses about the initial support for Service Workers that needs to be implemented.<!-- --></p>
<!-- --><p>The Servo browser engine, a project driven by the need for exploiting parellelism at every level of rendering and layout and to leverage the growing number of CPU cores we have available today. Existing browsers in the market today are not easily able to exploit the multi-core CPUs because it would require a re-thought on their large legacy codebase. The architectural design of majority of browsers we have today were envisioned long back ago when there weren&#x27;t many CPU cores available to us. But things have changed today and that the CPU clocks already have reached its max clock numbers. So there is a natural progression towards multi-core CPUs even running in mobile devices. Now Servo is at this growth phase where it is feasible to experiment with modern tools and techniques in order to analyse what works best and what not and to leverage the parallelism of multi-core CPUs. The aim is to build an embeddable browser engine, that runs efficiently and fast with lesser bugs.</p>
<!-- --><p>The engine is being developed in a type safe GC-less language named <!-- --><code>Rust</code> a project started by <!-- --><a href="https://github.com/graydon">Graydon Hoare</a> and now is sponsored by Mozilla. Rust is a low-level system&#x27;s programming language with a highly expressive type system yet affords zero cost abstractions with compile time type safety checks without relying on Garbage collection. You produce well defined programs, when you write Rust code. The language has this concept of ownership rules describing that there can only be a single owner of a resource in its surrounding scope, and that borrowing it would freeze any modifications by the borrower as well as by the owner. The choice of choosing a completely different language other than C++ (which most browser engines are developed in) comes as another reason for mitigating various <!-- --><a href="https://bugs.launchpad.net/bugs/bugtrackers/auto-bugs.webkit.org">bugs</a> of arbitrary code access or memory segfaults that exists in most browsers today.<!-- --></p>
<!-- --><p>So, how does a browser engine works? Well, a justified answer to that would be in several pages.ðŸ˜„ A lot goes on in a browser engine&#x27;s lifecycle. To make it brief, A web browser as seen from an outer level, consists of two parts: the outer <!-- --><code>chrome shell</code>, which is the windowing system users use to interact with the page and the inner rendering engine, which does all the heavy lifting of rendering those complex web pages. That&#x27;s the general bird&#x27;s eye. If you want to dig into details, I would reference this <!-- --><a href="http://www.html5rocks.com/en/tutorials/internals/howbrowserswork/">article</a>.<!-- --></p>
<!-- --><p>Having made ourselves familiar with browser engines, let&#x27;s look at what are the main components of Servo. Servo&#x27;s codebase is organized as follows:</p>
<!-- --><h2 id="compositor"><a href="#compositor">Compositor</a></h2>
<!-- --><p><a href="https://github.com/servo/servo/blob/master/components/compositing/compositor.rs">Compositor</a> manages window events back and forth from Constellation.<!-- --></p>
<!-- --><h2 id="constellation"><a href="#constellation">Constellation</a></h2>
<!-- --><p><a href="https://github.com/servo/servo/blob/master/components/constellation/constellation.rs">Constellation</a> is the central co-ordinator of events from Compositor and the different Pipelines.<!-- --></p>
<!-- --><h2 id="pipeline"><a href="#pipeline">Pipeline</a></h2>
<!-- --><p>A <!-- --><a href="https://github.com/servo/servo/blob/master/components/constellation/pipeline.rs">Pipeline</a> is a seperate process and the constellation keeps track of all the pipelines created. It comprises of the script thread, the layout thread, paint thread.<!-- --></p>
<!-- --><h2 id="resource"><a href="#resource">Resource</a></h2>
<!-- --><p><a href="https://github.com/servo/servo/blob/master/components/net/resource_thread.rs">Resource</a> manages all of file I/O or network I/O events, when requested by the DOM. It also performs caching of resources.<!-- --></p>
<!-- --><h2 id="script"><a href="#script">Script</a></h2>
<!-- --><p><a href="https://github.com/servo/servo/tree/master/components/script">Script</a> comprises of the in-memory representation of the DOM (Document Object Model) that represents a web page along with its script thread which manages parsing of the document and running any javascript in the page. Servo does not have its own javascript engine in Rust yet, and instead relies on the <!-- --><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Projects/SpiderMonkey">Spidermonkey Engine</a> for which <!-- --><a href="https://github.com/servo/rust-mozjs">bindings</a> are generated to be used by the DOM code. The DOM objects are managed solely by the Spidermonkey&#x27;s Garbage collector and Servo does not involve itself with any reference counting of Rust side of DOM objects, as compared to Gecko which uses a cycles collector in c++ code. Every DOM code on Rust side keeps a reflector (a pointer) to the Spidermonkey&#x27;s DOM object.<!-- --></p>
<!-- --><p>The above components are isolated tasks that communicate with each other via message passing i.e., using <!-- --><a href="https://github.com/servo/ipc-channel">channels</a>.<!-- --></p>
<!-- --><ul>
<!-- --><li>
<!-- --><p>The lifecycle of Servo, starts with <!-- --><a href="https://github.com/servo/servo/blob/ce88b8ed30feff9c7d3f067041fe5d781e012351/components/servo/main.rs#L51">main.rs</a> doing an initial command line parsing to get the URI of the requested resources. It then creates a Window Compositor followed by the Constellation, which is then able to handle user events and inputs, which can then be forwarded to the constellation for processing.<!-- --></p>
<!-- --></li>
<!-- --><li>
<!-- --><p>The <!-- --><a href="https://github.com/servo/servo/blob/ce88b8ed30feff9c7d3f067041fe5d781e012351/components/constellation/constellation.rs#L84">Constellation</a> acts a mediator between the Window Compositor and the Pipeline. It also handles the navigation events made from within, the Script thread (of any page) or from the Compositor. The constellation also initiates other threads such as the Resource thread, and the Image Cache thread.<!-- --></p>
<!-- --></li>
<!-- --><li>
<!-- --><p>A Pipeline in Servo is an an abstraction of a unit of &quot;web content&quot;. These are tracked by the constellation thread.</p>
<!-- --></li>
<!-- --></ul>
<!-- --><p>A <!-- --><a href="https://github.com/servo/servo/blob/ce88b8ed30feff9c7d3f067041fe5d781e012351/components/constellation/pipeline.rs#L49">Pipeline</a> process consists of a Layout Thread, Render Thread, and the Script Thread.<!-- --></p>
<!-- --><p>When a new pipeline is created spawning different threads, it hands over the task to the script thread to load the url, which was passed as arguments. The script thread sends the load message to the Resource Thread, which dispatches the task to the appropriate loader, depending on the scheme of the URI requested. The content received from the resource thread is consumed in chunks and is forwarded then to the HTML parser in the script thread. The parser then creates the DOM, and this parsed DOM along with its stylesheets is then issued with a <!-- --><a href="https://github.com/servo/servo/blob/ce88b8ed30feff9c7d3f067041fe5d781e012351/components/layout/layout_thread.rs#L998">reflow</a> event to the Layout thread. The Layout thread calculates positioning and bounds of all DOM nodes in the parsed document. It then constructs a Render Tree with all the information necessary to paint the document using the graphics API. The render tree is then, handed over to the paint thread, which starts rendering the document in the viewport/window.<!-- --></p>
<!-- --><p>The above explanation is a very simplified overview of what goes into rendering a document in Servo. There&#x27;s a lot to discover and I will hopefully update this post with articulate sections in future as I gain more insight.</p>
<!-- --><p>The next post will discuss on some of the prelimnary aspects of Service Workers integration in Servo that needed to be integrated in the network code, in order to enable service workers to respond to the client requesting some resource from the network with some custom response if there is any response for a request that&#x27;s cached in.</p>
<!-- --><p>Thanks for all the help from Servo team in helping me understand the topics.</p><div class="flex justify-center"><hr class="mb-8 h-px bg-gray-400 border-0 dark:bg-gray-500 w-full"/></div><p class="text-sm font-bold">Want to share feedback, or discuss further ideas? Feel free to leave a comment here! Please follow Rust&#x27;s code of conduct. This comment thread directly maps to a discussion on GitHub, so you can also comment there if you prefer.</p></article>;<!-- --></div><footer class="flex flex-col items-center w-full"><div class="px-4 py-2 flex items-center justify-center space-x-2 border-2 rounded-md border-gray-500 hover:bg-blue-100 transition-colors hover:text-lime-900"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M17.625 1.499c-2.32 0-4.354 1.203-5.625 3.03-1.271-1.827-3.305-3.03-5.625-3.03C3.129 1.499 0 4.253 0 8.249c0 4.275 3.068 7.847 5.828 10.227a33.14 33.14 0 0 0 5.616 3.876l.028.017.008.003-.001.003c.163.085.342.126.521.125.179.001.358-.041.521-.125l-.001-.003.008-.003.028-.017a33.14 33.14 0 0 0 5.616-3.876C20.932 16.096 24 12.524 24 8.249c0-3.996-3.129-6.75-6.375-6.75zm-.919 15.275a30.766 30.766 0 0 1-4.703 3.316l-.004-.002-.004.002a30.955 30.955 0 0 1-4.703-3.316c-2.677-2.307-5.047-5.298-5.047-8.523 0-2.754 2.121-4.5 4.125-4.5 2.06 0 3.914 1.479 4.544 3.684.143.495.596.797 1.086.796.49.001.943-.302 1.085-.796.63-2.205 2.484-3.684 4.544-3.684 2.004 0 4.125 1.746 4.125 4.5 0 3.225-2.37 6.216-5.048 8.523z"></path></svg><p>Be a GitHub Sponser</p></div><div class="flex-col items-center justify-center mt-8 mb-8"><div class="text-center text-xs mx-auto">Â© 2016-<!-- -->2022<!-- --> creativcoder. All rights reserved.<!-- --></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"source":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    img: \"img\",\n    a: \"a\",\n    code: \"code\",\n    h2: \"h2\",\n    ul: \"ul\",\n    li: \"li\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://hackernoon.com/hn-images/0*GXeaiRPePMjHuuHZ\",\n        alt: \"alt init_phase\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"My \", _jsx(_components.a, {\n        href: \"service-workers-web/\",\n        children: \"previous post\"\n      }), \" gave a brief introduction about service workers. This post will be a brief intro to Servo's architectural design in order to provide a context for my next post that discusses about the initial support for Service Workers that needs to be implemented.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The Servo browser engine, a project driven by the need for exploiting parellelism at every level of rendering and layout and to leverage the growing number of CPU cores we have available today. Existing browsers in the market today are not easily able to exploit the multi-core CPUs because it would require a re-thought on their large legacy codebase. The architectural design of majority of browsers we have today were envisioned long back ago when there weren't many CPU cores available to us. But things have changed today and that the CPU clocks already have reached its max clock numbers. So there is a natural progression towards multi-core CPUs even running in mobile devices. Now Servo is at this growth phase where it is feasible to experiment with modern tools and techniques in order to analyse what works best and what not and to leverage the parallelism of multi-core CPUs. The aim is to build an embeddable browser engine, that runs efficiently and fast with lesser bugs.\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The engine is being developed in a type safe GC-less language named \", _jsx(_components.code, {\n        children: \"Rust\"\n      }), \" a project started by \", _jsx(_components.a, {\n        href: \"https://github.com/graydon\",\n        children: \"Graydon Hoare\"\n      }), \" and now is sponsored by Mozilla. Rust is a low-level system's programming language with a highly expressive type system yet affords zero cost abstractions with compile time type safety checks without relying on Garbage collection. You produce well defined programs, when you write Rust code. The language has this concept of ownership rules describing that there can only be a single owner of a resource in its surrounding scope, and that borrowing it would freeze any modifications by the borrower as well as by the owner. The choice of choosing a completely different language other than C++ (which most browser engines are developed in) comes as another reason for mitigating various \", _jsx(_components.a, {\n        href: \"https://bugs.launchpad.net/bugs/bugtrackers/auto-bugs.webkit.org\",\n        children: \"bugs\"\n      }), \" of arbitrary code access or memory segfaults that exists in most browsers today.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"So, how does a browser engine works? Well, a justified answer to that would be in several pages.ðŸ˜„ A lot goes on in a browser engine's lifecycle. To make it brief, A web browser as seen from an outer level, consists of two parts: the outer \", _jsx(_components.code, {\n        children: \"chrome shell\"\n      }), \", which is the windowing system users use to interact with the page and the inner rendering engine, which does all the heavy lifting of rendering those complex web pages. That's the general bird's eye. If you want to dig into details, I would reference this \", _jsx(_components.a, {\n        href: \"http://www.html5rocks.com/en/tutorials/internals/howbrowserswork/\",\n        children: \"article\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Having made ourselves familiar with browser engines, let's look at what are the main components of Servo. Servo's codebase is organized as follows:\"\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"compositor\",\n      children: _jsx(_components.a, {\n        href: \"#compositor\",\n        children: \"Compositor\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.a, {\n        href: \"https://github.com/servo/servo/blob/master/components/compositing/compositor.rs\",\n        children: \"Compositor\"\n      }), \" manages window events back and forth from Constellation.\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"constellation\",\n      children: _jsx(_components.a, {\n        href: \"#constellation\",\n        children: \"Constellation\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.a, {\n        href: \"https://github.com/servo/servo/blob/master/components/constellation/constellation.rs\",\n        children: \"Constellation\"\n      }), \" is the central co-ordinator of events from Compositor and the different Pipelines.\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"pipeline\",\n      children: _jsx(_components.a, {\n        href: \"#pipeline\",\n        children: \"Pipeline\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"A \", _jsx(_components.a, {\n        href: \"https://github.com/servo/servo/blob/master/components/constellation/pipeline.rs\",\n        children: \"Pipeline\"\n      }), \" is a seperate process and the constellation keeps track of all the pipelines created. It comprises of the script thread, the layout thread, paint thread.\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"resource\",\n      children: _jsx(_components.a, {\n        href: \"#resource\",\n        children: \"Resource\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.a, {\n        href: \"https://github.com/servo/servo/blob/master/components/net/resource_thread.rs\",\n        children: \"Resource\"\n      }), \" manages all of file I/O or network I/O events, when requested by the DOM. It also performs caching of resources.\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"script\",\n      children: _jsx(_components.a, {\n        href: \"#script\",\n        children: \"Script\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.a, {\n        href: \"https://github.com/servo/servo/tree/master/components/script\",\n        children: \"Script\"\n      }), \" comprises of the in-memory representation of the DOM (Document Object Model) that represents a web page along with its script thread which manages parsing of the document and running any javascript in the page. Servo does not have its own javascript engine in Rust yet, and instead relies on the \", _jsx(_components.a, {\n        href: \"https://developer.mozilla.org/en-US/docs/Mozilla/Projects/SpiderMonkey\",\n        children: \"Spidermonkey Engine\"\n      }), \" for which \", _jsx(_components.a, {\n        href: \"https://github.com/servo/rust-mozjs\",\n        children: \"bindings\"\n      }), \" are generated to be used by the DOM code. The DOM objects are managed solely by the Spidermonkey's Garbage collector and Servo does not involve itself with any reference counting of Rust side of DOM objects, as compared to Gecko which uses a cycles collector in c++ code. Every DOM code on Rust side keeps a reflector (a pointer) to the Spidermonkey's DOM object.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The above components are isolated tasks that communicate with each other via message passing i.e., using \", _jsx(_components.a, {\n        href: \"https://github.com/servo/ipc-channel\",\n        children: \"channels\"\n      }), \".\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [\"The lifecycle of Servo, starts with \", _jsx(_components.a, {\n            href: \"https://github.com/servo/servo/blob/ce88b8ed30feff9c7d3f067041fe5d781e012351/components/servo/main.rs#L51\",\n            children: \"main.rs\"\n          }), \" doing an initial command line parsing to get the URI of the requested resources. It then creates a Window Compositor followed by the Constellation, which is then able to handle user events and inputs, which can then be forwarded to the constellation for processing.\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [\"The \", _jsx(_components.a, {\n            href: \"https://github.com/servo/servo/blob/ce88b8ed30feff9c7d3f067041fe5d781e012351/components/constellation/constellation.rs#L84\",\n            children: \"Constellation\"\n          }), \" acts a mediator between the Window Compositor and the Pipeline. It also handles the navigation events made from within, the Script thread (of any page) or from the Compositor. The constellation also initiates other threads such as the Resource thread, and the Image Cache thread.\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsx(_components.p, {\n          children: \"A Pipeline in Servo is an an abstraction of a unit of \\\"web content\\\". These are tracked by the constellation thread.\"\n        }), \"\\n\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"A \", _jsx(_components.a, {\n        href: \"https://github.com/servo/servo/blob/ce88b8ed30feff9c7d3f067041fe5d781e012351/components/constellation/pipeline.rs#L49\",\n        children: \"Pipeline\"\n      }), \" process consists of a Layout Thread, Render Thread, and the Script Thread.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"When a new pipeline is created spawning different threads, it hands over the task to the script thread to load the url, which was passed as arguments. The script thread sends the load message to the Resource Thread, which dispatches the task to the appropriate loader, depending on the scheme of the URI requested. The content received from the resource thread is consumed in chunks and is forwarded then to the HTML parser in the script thread. The parser then creates the DOM, and this parsed DOM along with its stylesheets is then issued with a \", _jsx(_components.a, {\n        href: \"https://github.com/servo/servo/blob/ce88b8ed30feff9c7d3f067041fe5d781e012351/components/layout/layout_thread.rs#L998\",\n        children: \"reflow\"\n      }), \" event to the Layout thread. The Layout thread calculates positioning and bounds of all DOM nodes in the parsed document. It then constructs a Render Tree with all the information necessary to paint the document using the graphics API. The render tree is then, handed over to the paint thread, which starts rendering the document in the viewport/window.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The above explanation is a very simplified overview of what goes into rendering a document in Servo. There's a lot to discover and I will hopefully update this post with articulate sections in future as I gain more insight.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The next post will discuss on some of the prelimnary aspects of Service Workers integration in Servo that needed to be integrated in the network code, in order to enable service workers to respond to the client requesting some resource from the network with some custom response if there is any response for a request that's cached in.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Thanks for all the help from Servo team in helping me understand the topics.\"\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}},"meta":{"excerpt":"An awesome experience","slug":"community-bonding-gsoc-servo","title":"Post community bonding period with Servo- GSoC'16","tags":["gsoc","open-source","rust","servo"],"date":"Thu Jun 09 2016 05:30:00 GMT+0530 (India Standard Time)","author":"creativcoder","readingTime":"5min"}}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"community-bonding-gsoc-servo"},"buildId":"C0oqtusQj9cY-EdwLN_RL","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>